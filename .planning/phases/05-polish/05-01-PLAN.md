---
phase: 05-polish
plan: 01
type: execute
domain: macos-apps
---

<objective>
Create clear HUD showing game state, improved puck, and bet amount controls.

Purpose: Make the game state crystal clear so players always know what phase they're in and what matters.
Output: Prominent game state banner, better puck, adjustable bet amounts.
</objective>

<execution_context>
@~/.claude/skills/create-plans/workflows/execute-phase.md
@~/.claude/skills/create-plans/templates/summary.md
</execution_context>

<context>
@.planning/BRIEF.md
@.planning/ROADMAP.md
@.planning/phases/04-audio/04-02-SUMMARY.md
@Casey Craps/Casey Craps/GameScene.swift
@Casey Craps/Casey Craps/CrapsTableNode.swift
@Casey Craps/Casey Craps/GameManager.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add game state banner</name>
  <files>Casey Craps/Casey Craps/GameScene.swift</files>
  <action>
Create a prominent game state display at the top of the screen:

1. Add gameStateBanner: SKLabelNode property
   - Large font (36-48pt), bold
   - Positioned at top center of screen
   - High contrast (white or yellow on dark background)

2. Update banner text based on game state:
   - .waitingForBet: "PLACE YOUR BET"
   - .comeOut: "COME OUT ROLL"
   - .point(let value): "POINT IS [value]" (e.g., "POINT IS 6")
   - .resolved(won: true): "WINNER!"
   - .resolved(won: false): "LOSER" or "SEVEN OUT"

3. Create updateGameStateBanner() method called whenever state changes
   - Call after placing bet
   - Call after each roll outcome
   - Call after reset

4. Style the banner to stand out:
   - Background panel behind text (dark semi-transparent rect)
   - Or just bold text with shadow/outline

This is the single most important element - player should ALWAYS know the game phase at a glance.
  </action>
  <verify>xcodebuild -project "Casey Craps/Casey Craps.xcodeproj" -scheme "Casey Craps" build 2>&1 | tail -10</verify>
  <done>Game state banner shows current phase prominently at all times</done>
</task>

<task type="auto">
  <name>Task 2: Improve puck visualization</name>
  <files>Casey Craps/Casey Craps/CrapsTableNode.swift</files>
  <action>
Make the puck much more visible and clear:

1. Increase puck size:
   - Current is probably small - make it 50-60pt diameter
   - Should be clearly visible even from a distance

2. Improve puck appearance:
   - OFF state: Black circle with white "OFF" text, or dark/dim appearance
   - ON state: Bright white circle with black "ON" text
   - Add border/outline for definition

3. Position puck prominently:
   - When OFF: show in a designated "puck home" area (maybe left side)
   - When ON: position directly over the point number, overlapping it clearly

4. Add animation when puck moves:
   - Smooth slide animation from OFF position to point number
   - Or scale/pulse animation when placed

5. Consider adding glow effect to ON puck (SKEffectNode with blur, or just bright color)

The puck is how players know the point - it must be unmistakable.
  </action>
  <verify>xcodebuild -project "Casey Craps/Casey Craps.xcodeproj" -scheme "Casey Craps" build 2>&1 | tail -10</verify>
  <done>Puck is large, clearly shows ON/OFF, animates when moving to point</done>
</task>

<task type="auto">
  <name>Task 3: Add bet amount controls</name>
  <files>Casey Craps/Casey Craps/GameScene.swift</files>
  <action>
Allow player to choose bet amount instead of fixed $100:

1. Add bet amount state:
   - var selectedBetAmount: Int = 100
   - Available amounts: [25, 50, 100, 500]

2. Create bet amount buttons:
   - Row of buttons/labels showing: $25 | $50 | $100 | $500
   - Position below the table or in a control area
   - Highlight currently selected amount
   - Only visible/enabled when in .waitingForBet state

3. Handle bet button clicks:
   - In mouseDown, detect clicks on bet amount buttons
   - Update selectedBetAmount
   - Update visual highlight on buttons

4. Use selectedBetAmount when placing bet:
   - Instead of hardcoded 100, use selectedBetAmount
   - Disable amounts player can't afford (gray out if bankroll < amount)

5. Show selected bet in UI:
   - Display "BET: $100" or similar near betting area
   - Update chip label to show actual bet amount

This gives players agency and makes betting feel more real.
  </action>
  <verify>xcodebuild -project "Casey Craps/Casey Craps.xcodeproj" -scheme "Casey Craps" build 2>&1 | tail -10</verify>
  <done>Player can select bet amount from $25/$50/$100/$500, chip shows correct amount</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] xcodebuild build succeeds with no errors
- [ ] Game state banner always shows current phase
- [ ] Puck is large and clearly shows ON/OFF
- [ ] Puck animates when moving to point
- [ ] Bet amount buttons work and update selection
- [ ] Chip shows selected bet amount
- [ ] Can't select bet amount you can't afford
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No compiler errors
- Game state is always clear to player
</success_criteria>

<output>
After completion, create `.planning/phases/05-polish/05-01-SUMMARY.md`
</output>
