---
phase: 04-audio
plan: 02
type: execute
domain: macos-apps
---

<objective>
Implement event sounds for wins, losses, and point establishment.

Purpose: Audio feedback that celebrates wins, commiserates losses, and marks important game moments.
Output: Complete audio experience with all game events having appropriate sounds.
</objective>

<execution_context>
@~/.claude/skills/create-plans/workflows/execute-phase.md
@~/.claude/skills/create-plans/templates/summary.md
@~/.claude/skills/create-plans/references/checkpoints.md
</execution_context>

<context>
@.planning/BRIEF.md
@.planning/ROADMAP.md
@.planning/phases/04-audio/04-01-SUMMARY.md
@Casey Craps/Casey Craps/SoundManager.swift
@Casey Craps/Casey Craps/GameScene.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement win sound</name>
  <files>Casey Craps/Casey Craps/SoundManager.swift, Casey Craps/Casey Craps/GameScene.swift</files>
  <action>
1. In SoundManager, add win sound:
   - Method: playWinSound()
   - Ascending happy tones - simple fanfare
   - Sequence of 3-4 notes going up in pitch
   - Example: C5 -> E5 -> G5 -> C6 (major chord arpeggio)
   - Frequencies: ~523 -> 659 -> 784 -> 1047 Hz
   - Each note ~100-150ms, slight overlap or gap
   - Total duration ~500ms

2. Make it feel celebratory but not obnoxious
   - Moderate volume
   - Clean sine or slightly warm tone

3. In GameScene, when player wins:
   - Call playWinSound() when showing "WIN!" outcome
  </action>
  <verify>xcodebuild -project "Casey Craps/Casey Craps.xcodeproj" -scheme "Casey Craps" build 2>&1 | tail -10</verify>
  <done>Win outcome triggers ascending happy fanfare sound</done>
</task>

<task type="auto">
  <name>Task 2: Implement lose sound</name>
  <files>Casey Craps/Casey Craps/SoundManager.swift, Casey Craps/Casey Craps/GameScene.swift</files>
  <action>
1. In SoundManager, add lose sound:
   - Method: playLoseSound()
   - Descending sad tones - "wah wah" feel
   - Sequence of 2-3 notes going down in pitch
   - Example: E4 -> Eb4 -> D4 (chromatic descent)
   - Frequencies: ~330 -> 311 -> 294 Hz
   - Each note ~150-200ms
   - Slight pitch bend down on final note if possible (or just hold)
   - Total duration ~400-500ms

2. Should feel sympathetic, not punishing
   - Softer volume than win sound
   - Lower register

3. In GameScene, when player loses:
   - Call playLoseSound() when showing "LOSE!" or "SEVEN OUT!" outcome
  </action>
  <verify>xcodebuild -project "Casey Craps/Casey Craps.xcodeproj" -scheme "Casey Craps" build 2>&1 | tail -10</verify>
  <done>Lose outcome triggers descending sad sound</done>
</task>

<task type="auto">
  <name>Task 3: Implement point established sound</name>
  <files>Casey Craps/Casey Craps/SoundManager.swift, Casey Craps/Casey Craps/GameScene.swift</files>
  <action>
1. In SoundManager, add point sound:
   - Method: playPointEstablished()
   - Distinctive "ding" or announcement tone
   - Single clear tone or two-note motif
   - Example: G5 -> C6 (perfect fourth up) or just a bell-like tone
   - Frequencies: ~784 -> 1047 Hz, or single ~880 Hz (A5)
   - Duration: ~200-300ms with nice decay
   - Should feel like "attention - something important happened"

2. Different character from win/lose - informational, not emotional
   - Clear and bright
   - Cuts through without being jarring

3. In GameScene, when point is established:
   - Call playPointEstablished() when puck moves to point number
   - This happens in handleRollOutcome when state becomes .point
  </action>
  <verify>xcodebuild -project "Casey Craps/Casey Craps.xcodeproj" -scheme "Casey Craps" build 2>&1 | tail -10</verify>
  <done>Point establishment triggers distinctive ding/notification sound</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete synthesized audio for all game events</what-built>
  <how-to-verify>
    1. Run the app (Cmd+R)
    2. Click Pass Line to place bet - should hear chip click
    3. Click Roll Dice - should hear button click, then dice rattling
    4. If point established - should hear distinctive ding
    5. On win - should hear ascending happy tones
    6. On lose - should hear descending sad tones
    7. Play several rounds - sounds should feel:
       - Satisfying, not annoying
       - Appropriately timed (not too early/late)
       - Balanced volume (no sound too loud or quiet)
       - Fun and "casino-like" in spirit
    8. If any sound is grating or wrong, note which one
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe which sounds need adjustment</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] xcodebuild build succeeds with no errors
- [ ] Win sound plays on wins
- [ ] Lose sound plays on losses
- [ ] Point established sound plays when point is set
- [ ] All sounds have appropriate timing
- [ ] Audio experience is pleasant, not annoying
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Human verified audio feels good
- Phase 4 complete: game has full audio feedback
</success_criteria>

<output>
After completion, create `.planning/phases/04-audio/04-02-SUMMARY.md`

This completes Phase 4. Ready for Phase 5: Polish.
</output>
