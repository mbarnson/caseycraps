---
phase: 01-foundation
plan: 02
type: execute
domain: macos-apps
---

<objective>
Clean up SpriteKit template and connect GameManager to scene.

Purpose: Remove boilerplate and establish clean foundation for table rendering.
Output: Clean GameScene connected to GameManager, app launches to blank scene.
</objective>

<execution_context>
@~/.claude/skills/create-plans/workflows/execute-phase.md
@~/.claude/skills/create-plans/templates/summary.md
@~/.claude/skills/create-plans/references/checkpoints.md
</execution_context>

<context>
@.planning/BRIEF.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation/01-01-SUMMARY.md
@Casey Craps/Casey Craps/GameScene.swift
@Casey Craps/Casey Craps/GameManager.swift
@Casey Craps/Casey Craps/Models.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Clean up GameScene boilerplate</name>
  <files>Casey Craps/Casey Craps/GameScene.swift</files>
  <action>
Remove all template code from GameScene.swift:

1. Remove spinnyNode property and all references
2. Remove label property and references
3. Remove touchDown/touchMoved/touchUp methods
4. Remove mouseDown/mouseDragged/mouseUp template implementations
5. Remove keyDown template implementation
6. Keep the class structure and didMove(to:) lifecycle method (but empty it)
7. Keep update(_ currentTime:) method (empty for now)

Result should be a minimal GameScene class ready for craps table content.
Do NOT remove the file or class - just clean out the template junk.
  </action>
  <verify>xcodebuild -project "Casey Craps/Casey Craps.xcodeproj" -scheme "Casey Craps" build 2>&1 | head -20</verify>
  <done>GameScene.swift is minimal with no template code, builds successfully</done>
</task>

<task type="auto">
  <name>Task 2: Configure scene and connect GameManager</name>
  <files>Casey Craps/Casey Craps/GameScene.swift</files>
  <action>
Update GameScene to:

1. Add reference to GameManager.shared
2. Set background color to dark green (casino felt color: #0d5c0d or similar)
3. In didMove(to:), set up scene:
   - self.backgroundColor = SKColor(red: 0.05, green: 0.36, blue: 0.05, alpha: 1.0)
   - Print current game state to console for verification
4. Add a temporary "Roll Dice" label/button in center:
   - SKLabelNode with text "Roll Dice"
   - Position at center of scene
   - Add name "rollButton" for later click detection
5. Implement mouseDown to detect clicks on rollButton:
   - Get node at click location
   - If rollButton clicked, call a temporary test: roll two dice and print result

Keep it simple - this is just proving the architecture works.
Scene size should remain 1024x768 from the .sks file.
  </action>
  <verify>xcodebuild -project "Casey Craps/Casey Craps.xcodeproj" -scheme "Casey Craps" build 2>&1 | head -20</verify>
  <done>GameScene has green background, rollButton label, click prints dice roll to console</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Clean GameScene with green felt background and working Roll button</what-built>
  <how-to-verify>
    1. Open Xcode and run the app (Cmd+R), or run from CLI
    2. Verify: Window shows dark green casino felt background
    3. Verify: "Roll Dice" text visible in center
    4. Click "Roll Dice" and check Xcode console for dice roll output
    5. Confirm: No "Hello World" or spinning shapes from template
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] xcodebuild build succeeds with no errors
- [ ] App launches without crashes
- [ ] Green felt background displays
- [ ] Roll button is visible and clickable
- [ ] Console shows dice roll results on click
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Human verified app launches correctly
- Phase 1 complete: clean architecture ready for table and dice
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-02-SUMMARY.md`

This completes Phase 1. Ready for Phase 2: Table & Dice.
</output>
